-- Сначала убедимся, что у нас есть тестовые ЧОПы
INSERT INTO public.profiles (
    id,
    email,
    full_name,
    role,
    phone,
    city,
    company_name,
    is_verified,
    created_at,
    updated_at
) VALUES 
-- Дополнительные ЧОПы
(
    '99999999-9999-9999-9999-999999999999',
    'titan@test.com',
    'Михаил Сергеевич Титанов',
    'chop',
    '+7 (495) 999-88-77',
    'Москва',
    'ЧОП Титан-Безопасность',
    TRUE,
    NOW(),
    NOW()
),
(
    'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa',
    'fortress@test.com',
    'Елена Владимировна Крепостная',
    'chop',
    '+7 (812) 888-77-66',
    'Санкт-Петербург',
    'Крепость-СПб',
    TRUE,
    NOW(),
    NOW()
),
(
    'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb',
    'shield@test.com',
    'Андрей Петрович Щитов',
    'chop',
    '+7 (383) 777-66-55',
    'Новосибирск',
    'Щит и Меч НСК',
    FALSE,
    NOW(),
    NOW()
)
ON CONFLICT (id) DO NOTHING;

-- Добавляем разнообразные вакансии (исправленная версия)
INSERT INTO public.jobs (
    title,
    company_id,
    company_name,
    description,
    requirements,
    benefits,
    location,
    address,
    salary_from,
    salary_to,
    salary_period,
    schedule,
    experience_level,
    job_type,
    category,
    is_urgent,
    is_verified,
    status,
    views,
    applications,
    created_at,
    updated_at
) VALUES 

-- Вакансии от ЧОП Титан-Безопасность
(
    'Охранник в банк (день)',
    '99999999-9999-9999-9999-999999999999',
    'ЧОП Титан-Безопасность',
    'Требуется охранник для работы в отделении банка в дневную смену. Контроль доступа, наблюдение за порядком.',
    ARRAY['Удостоверение охранника 4-6 разряда', 'Опыт работы в банке приветствуется', 'Стрессоустойчивость', 'Внимательность'],
    ARRAY['Стабильная зарплата', 'Работа только днем', 'Дружный коллектив', 'Обучение'],
    'Москва',
    'ул. Тверская, 15',
    55000,
    65000,
    'месяц',
    '5/2 день',
    'Опыт от 6 месяцев',
    'full-time',
    'security',
    FALSE,
    TRUE,
    'active',
    78,
    4,
    NOW() - INTERVAL '4 hours',
    NOW()
),

(
    'Старший смены (ночь)',
    '99999999-9999-9999-9999-999999999999',
    'ЧОП Титан-Безопасность',
    'Ищем опытного старшего смены для работы в ночное время на промышленном объекте.',
    ARRAY['Удостоверение охранника 6 разряда', 'Опыт руководства от 3 лет', 'Знание пожарной безопасности'],
    ARRAY['Высокая зарплата', 'Доплата за ночь', 'Служебный транспорт', 'Премии'],
    'Москва',
    'Промзона Капотня',
    90000,
    110000,
    'месяц',
    'Ночные смены',
    'Опыт от 3 лет',
    'full-time',
    'senior',
    TRUE,
    TRUE,
    'active',
    156,
    9,
    NOW() - INTERVAL '2 days',
    NOW()
),

-- Вакансии от Крепость-СПб
(
    'Охранник в музей',
    'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa',
    'Крепость-СПб',
    'Требуется охранник для работы в государственном музее. Обеспечение сохранности экспонатов.',
    ARRAY['Удостоверение охранника', 'Образование не ниже среднего', 'Культура общения', 'Знание истории приветствуется'],
    ARRAY['Работа в культурной среде', 'Стабильная зарплата', 'Соцпакет', 'Льготы музея'],
    'Санкт-Петербург',
    'Дворцовая набережная, 34',
    48000,
    58000,
    'месяц',
    '2/2',
    'Без опыта',
    'full-time',
    'security',
    FALSE,
    TRUE,
    'active',
    92,
    6,
    NOW() - INTERVAL '1 day',
    NOW()
),

(
    'Охранник VIP-объекта',
    'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa',
    'Крепость-СПб',
    'Охрана элитного жилого комплекса. Работа с VIP-клиентами.',
    ARRAY['Удостоверение охранника 6 разряда', 'Презентабельный внешний вид', 'Знание английского языка', 'Опыт работы с VIP'],
    ARRAY['Очень высокая зарплата', 'Работа с элитой', 'Обучение этикету', 'Карьерные перспективы'],
    'Санкт-Петербург',
    'Петроградская сторона',
    120000,
    150000,
    'месяц',
    '2/2',
    'Опыт от 2 лет',
    'full-time',
    'vip',
    TRUE,
    TRUE,
    'pending',
    234,
    15,
    NOW() - INTERVAL '6 hours',
    NOW()
),

-- Вакансии от Щит и Меч НСК
(
    'Охранник склада (подработка)',
    'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb',
    'Щит и Меч НСК',
    'Подработка для студентов и пенсионеров. Охрана складского комплекса в выходные дни.',
    ARRAY['Удостоверение охранника', 'Ответственность', 'Готовность работать в выходные'],
    ARRAY['Гибкий график', 'Подходит для подработки', 'Еженедельные выплаты'],
    'Новосибирск',
    'ул. Складская, 25',
    25000,
    35000,
    'месяц',
    'Выходные дни',
    'Без опыта',
    'part-time',
    'security',
    FALSE,
    FALSE,
    'pending',
    45,
    2,
    NOW() - INTERVAL '3 hours',
    NOW()
),

(
    'Охранник-водитель',
    'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb',
    'Щит и Меч НСК',
    'Требуется охранник с правами категории B для сопровождения грузов.',
    ARRAY['Удостоверение охранника', 'Водительские права категории B', 'Стаж вождения от 3 лет', 'Знание города'],
    ARRAY['Служебный автомобиль', 'Оплата ГСМ', 'Командировочные', 'Стабильная работа'],
    'Новосибирск',
    'Различные адреса',
    65000,
    75000,
    'месяц',
    'Сменный график',
    'Опыт от 1 года',
    'full-time',
    'driver',
    FALSE,
    FALSE,
    'rejected',
    23,
    1,
    NOW() - INTERVAL '1 week',
    NOW()
),

-- Дополнительные вакансии от существующих ЧОПов
(
    'Охранник на стройку',
    '11111111-1111-1111-1111-111111111111',
    'Охранное Агентство Авангард',
    'Охрана строительной площадки. Контроль въезда техники и персонала.',
    ARRAY['Удостоверение охранника', 'Физическая выносливость', 'Готовность к работе на улице'],
    ARRAY['Доплата за вредность', 'Спецодежда', 'Горячее питание', 'Премии'],
    'Москва',
    'Новая Москва, стройплощадка',
    50000,
    60000,
    'месяц',
    '1/3',
    'Без опыта',
    'full-time',
    'security',
    FALSE,
    TRUE,
    'active',
    67,
    3,
    NOW() - INTERVAL '8 hours',
    NOW()
),

(
    'Охранник в школу',
    '22222222-2222-2222-2222-222222222222',
    'ЧОП Ильгория',
    'Требуется охранник для работы в общеобразовательной школе.',
    ARRAY['Удостоверение охранника', 'Справка о несудимости', 'Любовь к детям', 'Стрессоустойчивость'],
    ARRAY['Работа с детьми', 'Социально значимая работа', 'Летние каникулы', 'Стабильность'],
    'Москва',
    'СВАО, школа №1234',
    45000,
    50000,
    'месяц',
    '5/2',
    'Опыт от 6 месяцев',
    'full-time',
    'security',
    FALSE,
    TRUE,
    'active',
    89,
    7,
    NOW() - INTERVAL '12 hours',
    NOW()
),

(
    'Охранник ночного клуба',
    '33333333-3333-3333-3333-333333333333',
    'СТБ - Специальные Технологии Безопасности',
    'Ищем охранника для работы в ночном клубе. Контроль порядка, работа с посетителями.',
    ARRAY['Удостоверение охранника', 'Физическая подготовка', 'Опыт работы в развлекательных заведениях', 'Стрессоустойчивость'],
    ARRAY['Высокие чаевые', 'Ночные доплаты', 'Интересная работа', 'Знакомства'],
    'Москва',
    'Центр, ночной клуб',
    70000,
    90000,
    'месяц',
    'Ночные смены',
    'Опыт от 1 года',
    'full-time',
    'entertainment',
    TRUE,
    TRUE,
    'active',
    145,
    11,
    NOW() - INTERVAL '5 hours',
    NOW()
),

-- Архивные и отклоненные вакансии для разнообразия
(
    'Охранник (вакансия закрыта)',
    '11111111-1111-1111-1111-111111111111',
    'Охранное Агентство Авангард',
    'Эта вакансия уже закрыта, место занято.',
    ARRAY['Удостоверение охранника'],
    ARRAY['Стабильная работа'],
    'Москва',
    'Офисное здание',
    50000,
    55000,
    'месяц',
    '2/2',
    'Любой',
    'full-time',
    'security',
    FALSE,
    TRUE,
    'archived',
    234,
    45,
    NOW() - INTERVAL '2 weeks',
    NOW()
),

(
    'Сомнительная вакансия',
    'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb',
    'Щит и Меч НСК',
    'Вакансия была отклонена модерацией из-за нарушения правил.',
    ARRAY['Сомнительные требования'],
    ARRAY['Подозрительные условия'],
    'Новосибирск',
    'Неизвестный адрес',
    100000,
    200000,
    'месяц',
    'Странный график',
    'Без опыта',
    'full-time',
    'security',
    FALSE,
    FALSE,
    'rejected',
    12,
    0,
    NOW() - INTERVAL '3 days',
    NOW()
);

-- Проверяем, что все добавилось корректно
SELECT 
    COUNT(*) as total_jobs,
    COUNT(CASE WHEN status = 'active' THEN 1 END) as active_jobs,
    COUNT(CASE WHEN status = 'pending' THEN 1 END) as pending_jobs,
    COUNT(CASE WHEN status = 'rejected' THEN 1 END) as rejected_jobs,
    COUNT(CASE WHEN status = 'archived' THEN 1 END) as archived_jobs
FROM public.jobs;
